(function(b) {
	b.fn.kinMaxShow = function(l) {
		options = jQuery.extend(!0, {}, {
			height: 380,
			intervalTime:3,
			switchTime: 1E3,
			easing: "linear",
			imageAlign: "center center",
			button: {
				switchEvent: "click",
				showIndex: !1,
				normal: { },
				focus: { }
			},
			callback: function(a, b) {}
		}, l);
		var a = {};
		a.selector = b(this).selector;
		if (1 < b(this).length) return b.error("kinMaxShow error[More than one selected object]"), !1;
		a.self = this;
		a.index = 0;
		a.lindex = 0;
		a.size = b(a.self).children("div").size();
		a.prename = "kinMaxShow_";
		a.data = {};
		a.fn = {};
		a.onload = function() {
			b(a.self).css({
				width: "100%",
				height: options.height,
				overflow: "hidden",
				position: "relative"
			}).children("div").addClass(a.prename + "image_item").hide();
			a.init()
		};
		a.init = function() {
			a.setData();
			a.setLayout();
			a.setAnimate()
		};
		a.setData = function() {
			a.data.title = [];
			b(a.self).children("div").each(function() {
				a.data.title.push(b(this).find("img").attr("alt"))
			})
		};
		a.setLayout = function() {
			b(a.self).children("div").wrapAll('<div class="' + a.prename + 'image_box"></div>');
			b("." + a.prename + "image_item", a.self).each(function() {
				var a = b(this).children("a");
				if (a.length) {
					var c = a.children("img").attr("src");
					a.children("img").remove()
				} else c = b(this).children("img").attr("src"), b(this).children("img").remove();
				b(this).css({
					background: "url(" + c + ") no-repeat " + options.imageAlign,
					"z-index": 0
				})
			});
			b("." + a.prename + "image_item", a.self).eq(0).css("z-index", "1");
			if ("none" != options.button.normal.display) {
				var c = "";
				for (i = 1; i <= a.size; i++) c = options.button.showIndex ? c + ("<li>" + i + "</li>") : c + "<li> </li>";
				b(a.self).append('<ul class="' + a.prename + 'button">' + c + "</ul>");
				b("." + a.prename + "button li", a.self).eq(0).addClass("focus")
			}
			a.setCSS();
			b("." + a.prename + "image_item:gt(0)", a.self).css("z-index", 0).css({
				opacity: 0
			});
			b("." + a.prename + "image_item", a.self).show();
			b(a.self).css({
				overflow: "visible",
				visibility: "visible",
				display: "block"
			})
		};
		a.setCSS = function() {
			
		};
		a.setAnimate = function() {
			options.callback.call(b("." + a.prename + "image_item:eq(" + a.index + ")", a.self), a.index, "fadeIn");
			var c;
			b("." + a.prename + "button", a.self).delegate("li", options.button.switchEvent, function() {
				function f() {
					a.index = b(_this).index();
					a.setOpacity()
				}
				_this = this;
				"mouseover" == options.button.switchEvent ? c = setTimeout(f, 200) : f()
			});
			"mouseover" == options.button.switchEvent && b("." + a.prename + "button", a.self).delegate("li", "mouseout", function() {
				clearTimeout(c)
			});
			a.index = 1;
			a.lindex = 0;
			a.data.moveTimer = setInterval(a.setOpacity, 1E3 * options.intervalTime + options.switchTime)
		};
		a.setOpacity = function() {
			options.callback.call(b("." + a.prename + "image_item:eq(" + a.lindex + ")", a.self), a.lindex, "fadeOut");
			clearInterval(a.data.moveTimer);
			"none" != options.button.normal.display && (b("ul." + a.prename + "button li", a.self).removeClass("focus"), b("ul." + a.prename + "button li", a.self).eq(a.index).addClass("focus"));
			b("." + a.prename + "image_item:animated", a.self).stop(!0, !1);
			b("." + a.prename + "image_item", a.self).css("z-index", 0);
			b("." + a.prename + "image_item", a.self).eq(a.index).css({
				opacity: 0,
				"z-index": 1
			});
			b("." + a.prename + "image_item", a.self).eq(a.index).animate({
				opacity: 1
			}, {
				duration: options.switchTime,
				easing: options.easing,
				complete: function() {
					b("." + a.prename + "image_box ." + a.prename + "image_item:not(:eq(" + a.index + "))", a.self).css({
						opacity: 0
					});
					options.callback.call(b("." + a.prename + "image_item:eq(" + a.index + ")", a.self), a.index, "fadeIn");
					a.data.moveTimer = setInterval(a.setOpacity, 1E3 * options.intervalTime + options.switchTime);
					a.lindex = a.index;
					a.index == a.size - 1 ? a.index = 0 : a.index++
				}
			})
		};
		a.run = function() {
			a.onload()
		};
		a.fn.objToCss = function(a, f, g) {
			function h(a) {
				var b = "";
				return b = "-" + a.toLowerCase()
			}
			g = g ? !0 : !1;
			var k = -1 != navigator.userAgent.indexOf("MSIE"),
				e = "";
			if (g) for (var d in a) - 1 != b.inArray(d, f) && (pKey = d.replace(/([A-Z])/, h), e = "opacity" == pKey && k ? e + ("filter:alpha(opacity=" + 100 * a[d] + ");") : e + (pKey + ":" + a[d] + ";"));
			else for (d in a) b.isArray(f) ? -1 == b.inArray(d, f) && (pKey = d.replace(/([A-Z])/, h), e = "opacity" == pKey && k ? e + ("filter:alpha(opacity=" + 100 * a[d] + ");") : e + (pKey + ":" + a[d] + ";")) : (pKey = d.replace(/([A-Z])/, h), e = "opacity" == pKey && k ? e + ("filter:alpha(opacity=" + 100 * a[d] + ");") : e + (pKey + ":" + a[d] + ";"));
			return e
		};
		a.run()
	}
})(jQuery);